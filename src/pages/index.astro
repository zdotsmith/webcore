---
// src/pages/index.astro
import Layout from "../layouts/BaseLayout.astro";
import ContactForm from "../components/svelte/ContactForm.svelte";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog", ({ data }) => !data.draft))
  .sort((a,b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---
<Layout title="3D Animation + 3D Web | Your Name" description="High-end 3D animation and interactive WebGL experiences.">
  <!-- Hero -->
  <section class="grid md:grid-cols-2 gap-8 items-center py-12">
    <div>
      <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">
        3D Animation + 3D Web Experiences
      </h1>
      <p class="mt-4 text-lg text-gray-600 dark:text-gray-300">
        I craft cinematic 3D animation and performant, interactive WebGL/Three.js
        experiences for brands, products, and startups.
      </p>
      <a href="#contact" class="inline-flex items-center rounded-lg bg-brand px-5 py-3 text-black font-semibold mt-6">
        Get a quote
      </a>
    </div>
    <div class="relative">
      <!-- Drop a GLB model into /public/models/demo.glb to see it here -->
      <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
      <model-viewer
        src="/models/demo.glb"
        alt="3D demo"
        camera-controls
        auto-rotate
        style="width:100%; height:360px; background:transparent;"
      ></model-viewer>
      <p class="text-xs text-gray-500 mt-2">Replace /public/models/demo.glb with your model.</p>
    </div>
  </section>

  <!-- Services -->
  <section id="services" class="py-12">
    <h2 class="text-2xl font-bold mb-6">Services</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-xl border bg-white p-6 shadow-sm dark:bg-gray-800 dark:border-gray-700">
        <h3 class="font-semibold text-lg">3D Animation</h3>
        <p class="mt-2 text-gray-600 dark:text-gray-300">Product spots, explainers, simulations, and cinematic sequences.</p>
      </div>
      <div class="rounded-xl border bg-white p-6 shadow-sm dark:bg-gray-800 dark:border-gray-700">
        <h3 class="font-semibold text-lg">3D Web (WebGL)</h3>
        <p class="mt-2 text-gray-600 dark:text-gray-300">Interactive viewers, configurators, landing visuals (Three.js/GSAP).</p>
      </div>
      <div class="rounded-xl border bg-white p-6 shadow-sm dark:bg-gray-800 dark:border-gray-700">
        <h3 class="font-semibold text-lg">Pipeline & Optimization</h3>
        <p class="mt-2 text-gray-600 dark:text-gray-300">GLTF/GLB workflows, compression, LODs, performance tuning.</p>
      </div>
    </div>
  </section>

  <!-- Portfolio (swap images/models as needed) -->
  <section id="portfolio" class="py-12">
    <h2 class="text-2xl font-bold mb-6">Featured Work</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-xl overflow-hidden border bg-white dark:bg-gray-800 dark:border-gray-700">
        <img src="/placeholder-1.jpg" alt="Project 1" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="font-semibold">Project 1</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300">Short description of the 3D scene or animation.</p>
        </div>
      </div>
      <div class="rounded-xl overflow-hidden border bg-white dark:bg-gray-800 dark:border-gray-700">
        <img src="/placeholder-2.jpg" alt="Project 2" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="font-semibold">Project 2</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300">Another highlight or interactive piece.</p>
        </div>
      </div>
      <div class="rounded-xl overflow-hidden border bg-white dark:bg-gray-800 dark:border-gray-700">
        <img src="/placeholder-3.jpg" alt="Project 3" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="font-semibold">Project 3</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300">Add client name, goal, and outcome.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest blog posts -->
  <section class="py-12">
    <h2 class="text-2xl font-bold mb-6">Latest on the blog</h2>
    <div class="grid md:grid-cols-3 gap-6">
      {posts.map((post) => (
        <a href={`/blog/${post.slug}/`} class="block rounded-xl border bg-white p-6 shadow-sm hover:shadow-md transition dark:bg-gray-800 dark:border-gray-700">
          <h3 class="font-semibold">{post.data.title}</h3>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">{post.data.description}</p>
          <p class="mt-3 text-xs text-gray-500">
            {new Date(post.data.pubDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
          </p>
        </a>
      ))}
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="py-12">
    <h2 class="text-2xl font-bold mb-6">Letâ€™s work together</h2>
    <ContactForm client:load />
  </section>
</Layout>